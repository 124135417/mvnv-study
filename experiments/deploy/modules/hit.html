<div>
</div>

<script>
  (async function () {

  
    function getUrlVars() {
      var vars = {};
      var parts = window.location.href.replace(/[?&]+([^=&]+)=([^&]*)/gi, function (m, key, value) {
        vars[key] = value;
      });
      return vars;
    }

    // //see if url parameter was passed as to what type of vis to show for this link
    let visType = getUrlVars()["vis"];
    
    //Only assign a visType if it has been passed in as a parameter
    if (visType !== undefined){
      visType = visType.includes('nodeLink') ? "nodeLink" : 'adjMatrix';
    }

    console.log('visType is ', visType);
    experimentr.hideNext();
    await loadTasks(visType);

    //set up  user on firestore to track answers and usage;
    if (track){

      let loggedInUser = workerID !== undefined;

      if (!loggedInUser){
        workerID = develop ? 'DevelopUser' :  makeid(6);

        let screenSize = {
        availWidth: window.screen.availWidth,
        availHeight: window.screen.availHeight,
        width: window.screen.width,
        height: window.screen.height,
        colorDepth: window.screen.colorDepth,
        pixelDepth: window.screen.pixelDepth
      };

        db.collection('participants').doc(workerID).set({
          screenSize,
          startTime: new Date().toString()
        });
      }
      
      trackResults();
    }
  

    d3.select('.hit').style('display', 'inline');
    if (vis === 'nodeLink') {
      d3.selectAll('.development').remove();
      loadVis("vis");

    } else {
      // included script already auto loads the vis. 
    }

    resetPanel();
    // experimentr.startTimer('exploration');

  })()
</script>
